{"ast":null,"code":"var _jsxFileName = \"/home/timloughrist/Code/projects/tunnel-brawl/src/Components/Board/pieces.js\",\n  _s = $RefreshSig$();\nimport React, { useContext } from 'react';\nimport swal from '@sweetalert/with-react';\nimport { BoardContext, BoardIdContext, ActivePieceContext, GameContext, ColorContext } from '../Games/game.js';\nimport { GamesContext } from '../Games/games.js';\nimport movepiece from '../Fetching/movepiece.js';\nimport showmove from '../Fetching/showmove.js';\nimport clearhighlights from '../Fetching/clearhighlights.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Piece(_ref) {\n  _s();\n  let {\n    type,\n    src,\n    alt,\n    setterBundle\n  } = _ref;\n  const games = useContext(GamesContext);\n  const board = useContext(BoardContext);\n  const boardId = useContext(BoardIdContext);\n  const activePiece = useContext(ActivePieceContext);\n  const game = useContext(GameContext);\n  const color = useContext(ColorContext);\n  const setActivePiece = setterBundle.setActivePiece;\n  const setGames = setterBundle.setGames;\n  async function handleClick(e) {\n    if (game.turn === color) {\n      const spaceId = parseInt(e.target.parentElement.parentElement.id);\n      const spaceItself = board.find(_ref2 => {\n        let {\n          loc\n        } = _ref2;\n        return loc === spaceId;\n      });\n      await clear();\n      if (spaceItself.contents.highlight === \"highlight--move\" || spaceItself.contents.highlight === \"highlight--capture\") {\n        const res = await movepiece(boardId, activePiece, spaceId);\n        if (res.ok) {\n          const gamePkg = await res.json();\n          const gamesSans = games.filter(game => game.gspaceIdame.id !== gamePkg.game.id);\n          setGames([...gamesSans, gamePkg]);\n        } else if (res.statusText === \"Not Acceptable\") {\n          swal(\"Illegal move\");\n        }\n        return;\n      } else if (spaceItself.contents.type === \"empty\") {\n        return;\n      } else {\n        setActivePiece(parseInt(e.target.parentElement.parentElement.id));\n        const res = await showmove(boardId, spaceId);\n        const gamePkg = await res.json();\n        const gamesSans = games.filter(game => game.game.id !== gamePkg.game.id);\n        setGames([...gamesSans, gamePkg]);\n      }\n    } else {\n      swal(\"Sorry, it's not your turn.\");\n    }\n  }\n  ;\n  async function clear() {\n    const res = await clearhighlights(boardId);\n    const gamePkg = await res.json();\n    const gamesSans = games.filter(game => game.game.id !== gamePkg.game.id);\n    setGames([...gamesSans, gamePkg]);\n  }\n  ;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"piece\",\n    children: type === \"empty\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: type,\n      onClick: e => handleClick(e)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n      className: type,\n      src: src,\n      alt: alt,\n      onClick: e => handleClick(e)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(Piece, \"xuYVdSKo8smERtP0vBZlTBfub88=\");\n_c = Piece;\n;\nvar _c;\n$RefreshReg$(_c, \"Piece\");","map":{"version":3,"names":["React","useContext","swal","BoardContext","BoardIdContext","ActivePieceContext","GameContext","ColorContext","GamesContext","movepiece","showmove","clearhighlights","jsxDEV","_jsxDEV","Piece","_ref","_s","type","src","alt","setterBundle","games","board","boardId","activePiece","game","color","setActivePiece","setGames","handleClick","e","turn","spaceId","parseInt","target","parentElement","id","spaceItself","find","_ref2","loc","clear","contents","highlight","res","ok","gamePkg","json","gamesSans","filter","gspaceIdame","statusText","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/timloughrist/Code/projects/tunnel-brawl/src/Components/Board/pieces.js"],"sourcesContent":["import React, { useContext } from 'react';\nimport swal from '@sweetalert/with-react';\nimport { BoardContext, BoardIdContext, ActivePieceContext, GameContext, ColorContext } from '../Games/game.js';\nimport { GamesContext } from '../Games/games.js';\nimport movepiece from '../Fetching/movepiece.js';\nimport showmove from '../Fetching/showmove.js';\nimport clearhighlights from '../Fetching/clearhighlights.js';\n\nexport default function Piece({type, src, alt, setterBundle}) {\n\n  const games = useContext(GamesContext);\n  const board = useContext(BoardContext);\n  const boardId = useContext(BoardIdContext);\n  const activePiece = useContext(ActivePieceContext);\n  const game = useContext(GameContext);\n  const color = useContext(ColorContext);\n  const setActivePiece = setterBundle.setActivePiece;\n  const setGames = setterBundle.setGames;\n\n  async function handleClick(e) {\n    if (game.turn === color) {\n      const spaceId = parseInt(e.target.parentElement.parentElement.id);\n      const spaceItself = board.find(({loc}) => loc === spaceId);\n      await clear();\n      if (spaceItself.contents.highlight === \"highlight--move\" || spaceItself.contents.highlight === \"highlight--capture\") {\n        const res = await movepiece(boardId, activePiece, spaceId);\n        if (res.ok) {\n          const gamePkg = await res.json();\n          const gamesSans = games.filter(game => game.gspaceIdame.id !== gamePkg.game.id);\n          setGames([...gamesSans, gamePkg]);\n        } else if (res.statusText === \"Not Acceptable\") {\n          swal(\"Illegal move\")\n        }\n        return;\n      } else if (spaceItself.contents.type === \"empty\") {\n        return;\n      } else {\n        setActivePiece(parseInt(e.target.parentElement.parentElement.id))\n        const res = await showmove(boardId, spaceId);\n        const gamePkg = await res.json();\n        const gamesSans = games.filter(game => game.game.id !== gamePkg.game.id);\n        setGames([...gamesSans, gamePkg]);\n      }\n    } else {\n      swal(\"Sorry, it's not your turn.\");\n    }\n  };\n\n  async function clear() {\n    const res = await clearhighlights(boardId)\n    const gamePkg = await res.json();\n    const gamesSans = games.filter(game => game.game.id !== gamePkg.game.id);\n    setGames([...gamesSans, gamePkg])\n  };\n\n  return (\n    <div className={\"piece\"}>\n      {\n        type === \"empty\" ?\n          <div className={type} onClick={(e) => handleClick(e)} />\n        : <img className={type} src={src} alt={alt} onClick={(e) => handleClick(e)} />\n      }\n    </div>\n  );\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}